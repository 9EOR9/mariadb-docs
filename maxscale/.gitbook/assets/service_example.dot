digraph config {
    rankdir=LR;
    compound=true;
    node [fontsize="11"];

    subgraph cluster_mxs {
        label = "MaxScale";
        style=dotted;
        node [style=filled,fillcolor=white];

        subgraph cluster_svc {
            label = "Service";
            style=filled;
            color=lightgrey;
            node [style=filled,fillcolor=white];

            filter [label="Filter\n(optional)", shape=box];
            router [label="Router", shape=diamond];

            filter -> router;
        }

        listener [label="Listener", shape=box];
        monitor [label="Monitor", shape=oval];

        listener -> filter;
        filter -> monitor [style=invis];
    }

    client [label="Client", shape=oval];
    server2 [label="Server2", shape=cylinder];
    server1 [label="Server1", shape=cylinder];
    server3 [label="Server3", shape=cylinder];

    client -> listener;
    router -> server2 [minlen=2];
    router -> server1 [minlen=2];
    router -> server3 [minlen=2];
    monitor -> server2 [style=dashed];
    monitor -> server1 [style=dashed];
    monitor -> server3 [style=dashed];
}

